<?php
defined('BASEPATH') OR exit('No direct script access allowed');
class Add_Rental_Property extends CI_Controller {
    function __construct() {
        parent::__construct();
        // Load form helper library
        $this->load->helper('form');


        // Load session library
        $this->load->library('session');

        // Load database
        $this->load->model('Rental_Property');
		$this->load->model('Login_database');

    }
    /**
     * Index Page for this controller.
     *
     * Maps to the following URL
     * 		http://example.com/index.php/welcome
     *	- or -
     * 		http://example.com/index.php/welcome/index
     *	- or -
     * Since this controller is set as the default controller in
     * config/routes.php, it's displayed at http://example.com/
     *
     * So any other public methods not prefixed with an underscore will
     * map to /index.php/welcome/<method_name>
     * @see https://codeigniter.com/user_guide/general/urls.html
     */
    public function index()
    {
        $this->load->view('add_rental_property');
    }

	// Check for user login process
    public function Add_Rental_Property() {
		$data = array(
			'property_id' => $this->input->post('property_id'),
			'property_name' => $this->input->post('property_name'),
			'address' => $this->input->post('address'),
			'town' => $this->input->post('town'),
			'phone' => $this->input->post('phone'),
			'email' => $this->input->post('email'),
			'listed_on' => $this->input->post('listed_on'),
			'maximum_guests' => $this->input->post('maximum_guests'),
			'beds' => $this->input->post('beds'),
			'bathroom' => $this->input->post('bathroom'),
			'pool_size' => $this->input->post('pool_size'),
			'washer' => $this->input->post('washer'),
			'tv' => $this->input->post('tv'),
			'aircon' => $this->input->post('aircon'),
			'wifi' => $this->input->post('wifi'),
			'bbq' => $this->input->post('bbq'),
			'private_parking' => $this->input->post('private_parking'),
			'private_garden' => $this->input->post('private_garden'),
			'private_pool' => $this->input->post('private_pool'),
			'pets_allowed' => $this->input->post('pets_allowed'),
			'family_friendly' => $this->input->post('family_friendly'),
			'village_house' => $this->input->post('village_house'),
			'rural_setting' => $this->input->post('rural_setting'),
			'romatic_for_two' => $this->input->post('romatic_for_two'),
			'cosy_cottage' => $this->input->post('cosy_cottage'),
			'description' => $this->input->post('description'),
		);
		$result = $this->Rental_Property->Add_Rental_Property1($data);
		
		if ($result == TRUE) {
			
			$data = array(
				'message' => 'Your Rental Prperty has been successfully added.'
			);
			index();

			
		} else {
			$data = array(
				'message' => 'Oops! Something went wrong. Please try again.'
			);
			redirect('Add_Rental_Property');
		}
	}
}
